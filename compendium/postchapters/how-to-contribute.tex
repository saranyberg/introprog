%!TEX encoding = UTF-8 Unicode
%!TEX root = ../compendium.tex

\chapter{Hur bidra till kursmaterialet?}\label{appendix:contrib}

\section{Bidrag är varmt välkomna!}

Ett av huvudsyftena med att göra detta kursmaterial fritt och öppet är att möjliggöra bidrag från alla som är intresserade. Speciellt välkommet är bidrag från studenter som vill vara delaktiga i att utveckla undervisningen.

\section{Instruktioner}

\subsection{Vad behövs för att kunna bidra?}

Om du hittar ett problem, t.ex. ett enkelt stavfel, eller har något mer omfattande som borde förbättras, men ännu inte känner till eller har tillgång till de verktyg som beskriv nedan och som behövs för att göra bidrag, kontakta då någon som redan bidragit till materialet, så att någon annan kan implementera ditt förslag.

Innan du själv kan implementera ändringar direkt i materialet, behöver du känna till, och ha tillgång  till, ett eller flera av följande verktyg (beroende på vad ändringen gäller):

\begin{itemize}[noitemsep]
\item Latex: \href{https://en.wikibooks.org/wiki/LaTeX}{en.wikibooks.org/wiki/LaTeX}
\item Scala: \href{https://en.wikipedia.org/wiki/Scala\_\%28programming_language\%29}{en.wikipedia.org/wiki/Scala\_\%28programming\_language\%29}
\item git: \href{https://en.wikipedia.org/wiki/Git\_\%28software\%29}{https://en.wikipedia.org/wiki/Git\_\%28software\%29}
\item GitHub: \href{https://en.wikipedia.org/wiki/GitHub}{en.wikipedia.org/wiki/GitHub}
\item sbt: \href{https://en.wikipedia.org/wiki/SBT\_\%28software\%29}{en.wikipedia.org/wiki/SBT\_\%28software\%29}
\end{itemize}
Läs mer om hur du bidrar här: \\ \href{https://github.com/lunduniversity/introprog#how-to-contribute-to-this-repo}{github.com/lunduniversity/introprog\#how-to-contribute-to-this-repo}



\subsection{Svenska eller engelska?}

Vi blandar engelska och svenska enligt följande principer:

\begin{itemize}

\item Publika diskussioner, t.ex. i issues och pull requests på GitHub, sker på engelska. I en framtid kan delar av materialet komma att översättas till engelska och då är det bra om även icke-svenskspråkiga kan förstå vad som har hänt. Alla ändringshändelser sparas och man kan söka och gå tillbaka i historiken.

\item Kompendiet finns för närvarande bara på svenska eftersom kursen initialt endast ges för svenskspråkiga studenter, men texten ska hjälpa läsaren att tillgodogöra sig motsvarande engelsk terminologi. Skriv därför mostvarande engelska begrepp \Eng{concept} i parentes med hjälp av latex-kommandot \verb+\Eng{concept}+.

\item På övningar och föreläsningar är svenska variabelnamn ok. Svenska kan användas för att hjälpa den som håller på att lära sig att skilja på ord som vi själv hittar på och ord som finns i programmeringsspråket. Detta signalerar också att när man lär sig och experimenterar kan man hitta på tokroliga namn och använda svenska hur mycket man vill. Man lär sig genom att prova!

\item Kod i labbar ska vara på engelska. Detta signalerar att när man kodar för att det ska bli något bestående, då kodar man på engelska.

\end{itemize}

\section{Exempel}\label{section:OSS-contribution-example}

Som exempel på hur det går till i ett typiskt öppen-källkodsprojekt, beskrivs nedan vad som hände i ett verkligt fall: en dokumentationsuppdatering av Scala-dokumentationen efter att ett fel upptäckts. Detta exempelfall är ett typiskt scenario som illustrerar hur det kan gå till, och vad man kan behöva tänka på. Exemplet ger också länkar till och inblick i ett riktigt stort projekt med öppen källkod.

\subsection*{Scenario: \emph{att göra ett bidrag vid upptäckt av problem}}

''Jag fick till min stora glädje denna \emph{Pull Request} (PR) accepterad till dokumentationssajten för Scala. Man kan se mitt bidrag här:\\
\href{https://github.com/scala/scala.github.com/commit/7da81868ba4d74b87fe0b19478d3ae9a3019d80d}{github.com/scala/scala.github.com/commit/7da81868ba4d74b87fe0b1} 

Att börja med att bidra till dokumentation är ofta en bra väg att komma in i ett open source-projekt, då det är en god chans att hjälpa till utan att det behöver kräva djup kompetens om koden i repot. Jag beskriver nedan vad som hände steg för steg då jag fick en riktig PR accepterad, som ett typiskt exempel på hur det ofta fungerar.

\begin{enumerate}

\item Jag tyckte dokumentationen för metoden \code{lengthCompare} på indexerbara samlingar på \href{http://scala-lang.org/documentation/}{scala-lang.org/documentation} var förvirrande. När jag provade i REPL blev det uppenbart att något var fel: antingen så var dokumentationen fel eller så funkade inte metoden som den skulle. Ojoj, kanske har jag upptäckt ett nytt fel? En chans att bidra!

\item Först sökte jag noga bland alla issues som ligger under fliken 'issues' på GitHub för att se om någon redan hittat detta probelm. Om så vore fallet hade jag kunnat kommentera en sådan issue och skriva något till stöd för att den behöver fixas, eller allra helst att erbjuda mig att försöka fixa den. Men jag hittade ingen issue om detta...

\item Jag skapade därför ett nytt ärende genom att klicka på knappen \emph{New issue} i webbgränssnittet på GitHub och här syns resultatet: \\ \url{https://github.com/scala/scala.github.com/issues/515#} \\ Jag tänkte noga på hur jag skulle formulera mig: 

\begin{itemize}[nolistsep, noitemsep]
  \item Titeln på issuen är extra viktig: den ska sammanfatta på en enda rad vad det hela rör sig om så att läsaren av rubriken förstår vad problemet är. 
  \item Jag jobbade sedan med att skriva en tydlig och detaljerad beskrivning av problemet och angav exakt vilken version det gällde. Det är bra att klistra in exempel från Scala REPL och andra testfallskörningar med indata och utdata om relevant. Det är viktigt att problemet går att hitta och återskapa av andra, därför behövs information om vilken version det gäller och ett minimalt testfall som renodlar problemet.
  \item Det är bra att ställa frågor och komma med förslag för att öppna en diskussion om ärendet. Jag frågade speciellt om detta var ett dokumentationsproblem eller en bugg i koden.
  \item OBS! Man ska inte öppna en issue innan man först kollat noga att det verkligen är något som bör åtgärdas och att det inte är en dubblett eller överlapp med andra issues: varje gång man öppnar ett ärende kommer det att generera arbete för andra även om ärendet inte ens till slut resulterade i någon åtgärd... 
  \item Om det är ett mer öppet, allmänt förslag, en förbättring eller en helt ny feature kan man också skapa en issue (det måste alltså inte vara en renodlad bugg). Är man osäker på om ärendet är relevant, är det bra att diskutera det i gemenskapens mejlforum först.
\end{itemize}

\item Jag fick snabbt kommentarer på min issue, vilket är kännetecknande för en väl fungerande community med alerta maintainers. Och när jag fick uppmuntran att bidra, så erbjöd jag mig att implementera förbättringen. Tänk på att alltid skriva i en saklig, kortfattad och trevlig ton!

\item Nästa steg är att ''forka'' repot på GitHub genom att helt enkelt klicka på \emph{Fork} i webbgränssnittet. Jag fick då en egen kopia av repot under min egen användare på GitHub, där jag har rättigheter att ändra. 

\item Därefter klonade jag repot till min lokala maskin med terminalkommandot \texttt{ git clone \emph{https://...}} (eller så kan man använda skrivbordsappen GitHub Desktop).

\item Sedan rättade jag problemet direkt i relevant fil i en editor på min dator, i detta fallet var filen i formatet Markdown (ett lättläst textformat som man kan generera HTML från): \\ {\small\href{https://raw.githubusercontent.com/scala/scala.github.com/master/overviews/collections/seqs.md}{raw.githubusercontent.com/scala/scala.github.com/master/overviews/collections/seqs.md}}

\item När jag fixat problemet gjorde jag \texttt{git add} på filen och sedan \texttt{git commit -m "välgenomtänkt commit msg"}.  Jag tänkte efter noga innan jag skrev första raden i commit-meddelandet så att det skulle vara både kort och kärnfullt. Men ändå glömde jag att inkludera issue-numret \code{:(}, se min kommentar till commiten, som jag tillfogade i efterhand, när jag till slut upptäckte min fadäs:\\ {\small\href{https://github.com/bjornregnell/scala.github.com/commit/2624c305a8a6f24ea3398fe0fcbd0c72492bdd12#comments}{scala.github.com/commit/2624c305a8a6f24ea3398fe0fcbd0c72492bdd12\#comments}}

\item Efter att jag gjort \code{git commit} så finns ändringen ännu så länge bara lokalt på min dator. Då gäller det att ''pusha'' till min fork på GitHub med \code{git push} (eller använda \emph{Sync}-knappen i GitHub-desktop-appen).

\item Därefter skapade jag en PR genom att helt enkelt trycka på knappen \emph{New pull request} på GitHub-sidan för min fork. Jag tänkte efter noga innan jag författade rubriken som beskriver denna PR. Hade denna ändring varit mer omfattande hade jag också behövt göra en detaljerad beskrivning av hur ändringen var implementerad för att underlätta granskningen av mitt förslag. Ni kan se denna (numera avlutade) PR här: \\{\url{https://github.com/scala/scala.github.com/pull/517}}

\item När jag skapat en PR fick de som sköter repot ett automatiskt meddelande om denna nya PR och den efterföljande granskningsfasen inträddes. Den brukar sluta med att en eller flera andra personer kommenterar PR i webbgränssnitttet med 'LGTM'. LGTM = \emph{''Looks Good To Me''} och betyder ungefär "jag har kollat på detta nu och det verkar (vad jag kan bedöma) vara utmärkt och alltså redo för \emph{merge}". Om det inte ser bra ut så förväntas granskaren föreslå vad som behöver förbättras i en saklig och trevlig ton.

\item När PR är granskad så kan en person, som har rättigheter att ändra, ''merga'' in PR på huvudgrenen, som ofta kallas \emph{master}, i det centrala repot, som ofta kallas \emph{upstream}.

\item Avslutningsvis kan ärendet stängas av de ansvariga för repot. Denna issue är nu markerad ''Closed'' och syns inte längre i listan med aktiva issues. 

\end{enumerate}

Puh! Sen var det klart \code{:)} ''

\vspace{1em}\noindent\emph{Epilog:} Om du i framtiden får chansen att göra fler bidrag är det viktigt att först uppdatera din fork mot upstream innan du gör några nya ändringar i din lokala kopia; annars är risken att din PR innehåller föråldrad information och därmed blir en merge onödigt krånglig. Detta kan man göra genom en knapp i GitHub Desktop eller genom att följa denna beskrivning: \href{https://help.github.com/articles/syncing-a-fork/}{help.github.com/articles/syncing-a-fork/} Det är i allmänhet den som ändrar som ansvarar för att ändringar alltid sker i samklang med den mest aktuella versionen av upstream.
